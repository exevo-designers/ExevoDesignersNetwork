<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>Service Agreement | Exevo Designers Network</title>
    <link rel="icon" href="ExevoLogo/exevo-logo-profile.png" type="image/png">
    <link rel="apple-touch-icon" href="ExevoLogo/exevo-logo-profile.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Syncopate:wght@400;700&display=swap');
        
        :root {
            --brand-purple: #7c3aed;
            --text-dark: #0f172a;
            --brand-indigo: #4f46e5;
        }

        body { 
            font-family: 'Inter', sans-serif;
            color: var(--text-dark);
            background-color: #ffffff;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
            width: 100%;
        }

        .font-display {
            font-family: 'Syncopate', sans-serif;
            text-transform: uppercase;
            letter-spacing: -0.04em;
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--brand-purple), var(--brand-indigo));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .gradient-bg {
            background: linear-gradient(135deg, var(--brand-purple), var(--brand-indigo));
        }

        .clause-number {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: #f8fafc;
            font-weight: 700;
            color: var(--brand-purple);
            flex-shrink: 0;
            border: 1px solid #f1f5f9;
        }

        .term-card {
            border-left: 2px solid transparent;
            position: relative;
            transition: all 0.3s ease;
        }

        .term-card::before {
            content: '';
            position: absolute;
            left: -2px;
            top: 0;
            height: 40px;
            width: 2px;
            background: var(--brand-purple);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f8fafc; }
        ::-webkit-scrollbar-thumb { background: #e2e8f0; border-radius: 10px; }

        @media (max-width: 640px) {
            .term-card { padding-left: 1rem; }
            .clause-content { padding-left: 0 !important; margin-top: 1rem; }
            .hero-title { font-size: 2.75rem; line-height: 1; }
        }
        
        @media (min-width: 475px) {
            .xs\:inline { display: inline; }
        }

        /* Checkbox styling */
        .custom-checkbox {
            width: 20px;
            height: 20px;
            accent-color: var(--brand-purple);
            cursor: pointer;
        }

        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid var(--brand-purple);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(10px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .animate-fadeIn {
            animation: fadeIn 0.4s ease-out;
        }

        /* Print styles for PDF */
        @media print {
            nav { display: none; }
            #executeBtn, #termsAck, .no-print { display: none !important; }
            body { background: white; }
        }
    </style>
</head>
<body class="selection:bg-purple-100 selection:text-purple-900 bg-slate-50/30">

    <!-- Navigation -->
    <nav class="fixed w-full z-50 bg-white/90 backdrop-blur-md border-b border-gray-100 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 md:h-20 flex items-center justify-between">
            <a href="#" class="group flex items-center space-x-2 md:space-x-3">
                <img src="ExevoLogo/exevo-logo-png.png" alt="Exevo Logo" 
                     class="h-7 md:h-9 lg:h-10 w-auto object-contain transition-transform group-hover:scale-105" 
                     onerror="this.style.display='none'">
                <div class="font-display font-bold text-sm sm:text-lg md:text-xl tracking-tighter flex items-center">
                    EXEVO <span class="text-purple-600 ml-1 hidden xs:inline">DESIGNERS</span>
                </div>
            </a>
            <div class="hidden sm:block text-[10px] font-black uppercase tracking-widest text-slate-400">
                Official Document v2.3
            </div>
        </div>
    </nav>

    <main class="pt-28 pb-20 px-4 md:px-8 max-w-5xl mx-auto" id="contractContent">
        <!-- Hero Header -->
        <header class="text-center mb-12 md:mb-20">
            <span class="inline-block py-1.5 px-4 bg-purple-50 text-[#7c3aed] text-[10px] font-black uppercase tracking-[0.2em] rounded-full mb-6 border border-purple-100/50">Contractual Instrument</span>
            
            <h1 class="hero-title font-display font-black text-slate-900 mb-6 sm:mb-8 text-5xl md:text-7xl">
                SERVICE<br>
                <span class="gradient-text">AGREEMENT</span>
            </h1>

            <p class="text-slate-500 max-w-lg mx-auto font-medium text-sm leading-relaxed px-4">
                This Agreement is entered into on this <span class="border-b border-slate-300 px-2 font-bold text-slate-900" id="currentDay">__</span> day of <span class="border-b border-slate-300 px-2 font-bold text-slate-900" id="currentMonth">__________</span> 2026 (the "Effective Date").
            </p>

            <!-- Legal Notice -->
            <div class="mt-8 max-w-2xl mx-auto">
                <div class="bg-gradient-to-r from-amber-50 to-orange-50 border-l-4 border-amber-400 rounded-xl p-5 md:p-6 shadow-sm">
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 mt-0.5">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" class="text-amber-600">
                                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                                <line x1="12" y1="9" x2="12" y2="13"/>
                                <line x1="12" y1="17" x2="12.01" y2="17"/>
                            </svg>
                        </div>
                        <div class="flex-1 space-y-2">
                            <p class="text-[10px] font-black uppercase tracking-[0.2em] text-amber-800">Legal Notice</p>
                            <p class="text-xs md:text-sm text-slate-700 leading-relaxed font-medium">
                                This is a <strong class="text-amber-900">digitally executed agreement</strong> recognized under the <strong>Constitution of Kenya (2010)</strong>, the <strong>Kenya Information and Communications Act (Cap 411A)</strong>, and the <strong>Electronic Transactions Act</strong>. Digital acknowledgment constitutes legally binding consent equivalent to physical signatures.
                            </p>
                            <p class="text-[10px] text-slate-500 italic mt-2">
                                By checking the acknowledgment box and executing this agreement, both parties affirm their consent to be legally bound by these terms under Kenyan law.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div class="bg-white shadow-[0_32px_64px_-16px_rgba(124,58,237,0.08)] rounded-2xl md:rounded-[2.5rem] overflow-hidden border border-slate-100">
            
            <!-- Metadata Bar -->
            <div class="bg-slate-50/40 p-6 md:p-8 border-b border-slate-100 grid grid-cols-1 sm:grid-cols-2 gap-4">
                <div>
                    <p class="text-[9px] font-black uppercase tracking-widest text-slate-400 mb-1">Agreement Reference</p>
                    <p class="font-mono text-xs font-bold text-slate-600 tracking-tight" id="contractRef">EXV-STJ-2026-001</p>
                </div>
                <div class="sm:text-right">
                    <p class="text-[9px] font-black uppercase tracking-widest text-slate-400 mb-1">Status</p>
                    <p class="font-mono text-xs font-bold text-amber-600 tracking-tight" id="contractStatus">PENDING EXECUTION</p>
                </div>
            </div>

            <div class="p-6 md:p-14 space-y-12 md:space-y-20">
                
                <!-- The Parties -->
                <section class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8">
                    <div class="p-6 md:p-8 rounded-2xl md:rounded-3xl bg-slate-50/30 border border-slate-100">
                        <h3 class="text-[10px] font-black uppercase tracking-[0.2em] text-[#7c3aed] mb-4 md:mb-6">Service Provider</h3>
                        <p class="font-display text-xs md:text-sm font-bold mb-1">Exevo Designers Network</p>
                        <p class="text-xs text-slate-500 font-bold mb-1 uppercase tracking-tighter">Stephen Kiambuthi Njoroge (Editor Njoro)</p>
                        <p class="text-[10px] text-slate-400 font-medium">Creative Director & Founder</p>
                    </div>
                    <div class="p-6 md:p-8 rounded-2xl md:rounded-3xl bg-slate-50/30 border border-slate-100">
                        <h3 class="text-[10px] font-black uppercase tracking-[0.2em] text-[#7c3aed] mb-4 md:mb-6">Client (Institution)</h3>
                        <p class="font-display text-xs md:text-sm font-bold mb-1">St. Joseph Hospital & College</p>
                        <p class="text-xs text-slate-500 font-bold mb-1 uppercase tracking-tighter">Kabii Kariuki</p>
                        <p class="text-[10px] text-slate-400 font-medium">Authorized Representative</p>
                    </div>
                </section>

                <!-- Introduction -->
                <div class="text-slate-500 text-xs italic text-center max-w-2xl mx-auto border-y border-slate-50 py-4">
                    Exevo and the Client are hereinafter collectively referred to as the "Parties".
                </div>

                <!-- Detailed Clauses -->
                <section class="space-y-12 md:space-y-16">
                    
                    <!-- Clause 1 -->
                    <div class="term-card pl-6 md:pl-8 space-y-4">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">01</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Appointment & Representation</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-3 pl-0 md:pl-12">
                            <p><strong>1.1</strong> Kabii Kariuki confirms that he is duly authorized to act as a representative of St. Joseph Hospital & College for purposes of this Agreement.</p>
                            <p><strong>1.2</strong> All instructions, approvals, and communications issued by Kabii Kariuki in his capacity as a representative of St. Joseph Hospital & College shall be deemed valid and binding upon the Institution.</p>
                            <p><strong>1.3</strong> This Agreement applies strictly and exclusively to design work commissioned for St. Joseph Hospital & College only.</p>
                        </div>
                    </div>

                    <!-- Clause 2 -->
                    <div class="term-card pl-6 md:pl-8 space-y-4">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">02</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Scope of Work</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-3 pl-0 md:pl-12">
                            <p><strong>2.1</strong> Exevo shall provide social media flyer design services for St. Joseph Hospital & College.</p>
                            <p><strong>2.2</strong> Each deliverable shall consist of: One (1) custom-designed social media flyer per request, delivered in PNG or JPEG format (and PDF upon request).</p>
                            <p><strong>2.3</strong> Platform usage may include (but is not limited to): Facebook, Instagram, WhatsApp, X (Twitter), and LinkedIn.</p>
                        </div>
                    </div>

                    <!-- Clause 3 -->
                    <div class="term-card pl-6 md:pl-8 space-y-4">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">03</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Fees & Pricing Structure</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-4 pl-0 md:pl-12">
                            <div class="p-4 md:p-5 bg-purple-50 border border-purple-100 rounded-xl md:rounded-2xl">
                                <p class="text-slate-900 font-bold mb-1 text-xs">3.1 Institutional Pricing</p>
                                <p class="text-xs md:text-sm">The agreed price is <span class="text-[#7c3aed] font-black">Ksh. 500 per approved flyer design</span> strictly for St. Joseph Hospital & College.</p>
                            </div>
                            <div class="p-4 md:p-5 border border-amber-100 bg-amber-50/20 rounded-xl md:rounded-2xl">
                                <p class="text-slate-900 font-bold mb-2 text-xs">3.2 Personal / Third-Party Work (Important)</p>
                                <p class="text-xs leading-relaxed mb-3">Any design request that is not for the Institution, or is for a personal brand, third party, affiliate, or external entity linked to Kabii Kariuki, shall <strong>NOT</strong> fall under the Ksh. 500 rate.</p>
                                <p class="text-xs leading-relaxed italic border-t border-amber-100 pt-2 mt-2">Such designs shall be charged directly to Kabii Kariuki at a different rate agreed upon in writing.</p>
                            </div>
                            <p class="text-[11px] italic text-slate-400"><strong>3.4</strong> Exevo reserves the right to decline work if ambiguity exists regarding the institutional nature of a request.</p>
                        </div>
                    </div>

                    <!-- Clause 4 -->
                    <div class="term-card pl-6 md:pl-8 space-y-4">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">04</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Payment Terms</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-3 pl-0 md:pl-12">
                            <p><strong>4.1</strong> Invoicing shall be issued to St. Joseph Hospital & College for institutional designs.</p>
                            <p><strong>4.2</strong> Payments shall be made via M-Pesa, bank transfer, or any other method approved by Exevo.</p>
                            <p><strong>4.3</strong> Exevo reserves the right to withhold final deliverables for any unpaid invoices.</p>
                            <p><strong>4.4</strong> Late payments beyond seven (7) days from invoice date may attract a late fee of 10% per month.</p>
                        </div>
                    </div>

                    <!-- Clause 5 -->
                    <div class="term-card pl-6 md:pl-8 space-y-4">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">05</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Revisions</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-3 pl-0 md:pl-12">
                            <p><strong>5.1</strong> Each flyer includes up to two (2) reasonable revision rounds.</p>
                            <p><strong>5.2</strong> Additional revisions shall be charged at Ksh. 300 per revision.</p>
                            <p><strong>5.3</strong> Requests that materially alter the original brief shall be considered new work and charged accordingly.</p>
                        </div>
                    </div>

                    <!-- Clause 6 -->
                    <div class="term-card pl-6 md:pl-8 space-y-4">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">06</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Intellectual Property</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-3 pl-0 md:pl-12">
                            <p><strong>6.1</strong> Ownership of final approved designs shall transfer to the Institution only upon full payment.</p>
                            <p><strong>6.2</strong> Exevo retains ownership of all drafts, concepts, and rejected designs.</p>
                            <p><strong>6.3</strong> Exevo retains a non-exclusive, perpetual right to display completed work in its portfolio and marketing materials.</p>
                        </div>
                    </div>

                    <!-- Clause 7-11 Combined -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 pt-6">
                        <div class="p-6 bg-slate-50/50 rounded-3xl border border-slate-100">
                            <h4 class="text-[9px] font-black uppercase tracking-widest text-slate-400 mb-4">07 Warranties & Liability</h4>
                            <p class="text-xs text-slate-600 leading-relaxed">Exevo warrants original work. Liability is limited to the total amount paid for the specific design in dispute. Consequential damages are excluded.</p>
                        </div>
                        <div class="p-6 bg-slate-50/50 rounded-3xl border border-slate-100">
                            <h4 class="text-[9px] font-black uppercase tracking-widest text-slate-400 mb-4">08 Termination</h4>
                            <p class="text-xs text-slate-600 leading-relaxed">Either Party may terminate with seven (7) days written notice. Payment for all completed work remains due notwithstanding termination.</p>
                        </div>
                        <div class="p-6 bg-slate-50/50 rounded-3xl border border-slate-100">
                            <h4 class="text-[9px] font-black uppercase tracking-widest text-slate-400 mb-4">09 Governing Law</h4>
                            <p class="text-xs text-slate-600 leading-relaxed">This Agreement is governed by the Laws of the Republic of Kenya, including the Copyright Act and Data Protection Act (2019).</p>
                        </div>
                        <div class="p-6 bg-slate-50/50 rounded-3xl border border-slate-100">
                            <h4 class="text-[9px] font-black uppercase tracking-widest text-slate-400 mb-4">10 Entire Agreement</h4>
                            <p class="text-xs text-slate-600 leading-relaxed">This document supersedes all prior understandings. Amendments must be in writing and signed by both Parties.</p>
                        </div>
                    </div>

                    <!-- Clause 11 - Digital Execution -->
                    <div class="term-card pl-6 md:pl-8 space-y-4 mt-12">
                        <div class="flex items-center gap-4">
                            <span class="clause-number">11</span>
                            <h4 class="font-display text-[11px] md:text-xs font-bold tracking-tight">Digital Execution & Legal Validity</h4>
                        </div>
                        <div class="clause-content text-slate-600 text-sm space-y-3 pl-0 md:pl-12">
                            <p><strong>11.1</strong> This Agreement is executed digitally and shall have the same legal force and effect as a physically signed document under Kenyan law.</p>
                            <p><strong>11.2</strong> The Parties acknowledge that digital execution is recognized and enforceable pursuant to:</p>
                            <ul class="list-disc list-inside space-y-1 pl-4 text-xs">
                                <li>The Constitution of Kenya (2010)</li>
                                <li>The Kenya Information and Communications Act (Cap 411A)</li>
                                <li>The Electronic Transactions Act</li>
                            </ul>
                            <p><strong>11.3</strong> By checking the acknowledgment checkbox and clicking "Finalize & Secure Agreement," the Client's representative confirms their intent to be legally bound and acknowledges this action constitutes a binding electronic signature.</p>
                            <p><strong>11.4</strong> A timestamped record of execution, including the date, time, and IP address (where applicable), shall serve as evidence of mutual consent.</p>
                        </div>
                    </div>
                </section>

                <!-- Execution Section -->
                <div id="executionArea" class="pt-12 md:pt-16 border-t border-slate-100">
                    
                    <!-- Pre-execution Checklist -->
                    <div class="max-w-md mx-auto mb-10 p-5 bg-purple-50/50 border border-purple-100 rounded-2xl flex gap-4 items-start">
                        <input type="checkbox" id="termsAck" class="custom-checkbox mt-1" onchange="toggleExecuteBtn()">
                        <label for="termsAck" class="text-[11px] md:text-xs text-slate-600 font-medium leading-relaxed">
                            I, Kabii Kariuki, confirm I have read and understood all terms of this Agreement, especially <strong>Clause 3.2</strong> regarding personal work rates and <strong>Clause 11</strong> regarding digital execution. I agree to bind St. Joseph Hospital & College to this legally enforceable agreement under Kenyan law.
                        </label>
                    </div>

                    <div class="text-center mb-8">
                        <p class="text-sm text-slate-600 font-medium mb-2">Agreement Parties</p>
                        <div class="inline-flex items-center gap-4 text-xs text-slate-500">
                            <span class="font-bold">Kabii Kariuki</span>
                            <span class="text-purple-400">•</span>
                            <span class="font-bold">Editor Njoro</span>
                        </div>
                    </div>

                    <button id="executeBtn" disabled onclick="finalize()" class="w-full mt-10 md:mt-14 py-4 md:py-5 rounded-xl md:rounded-2xl font-display text-[10px] md:text-[11px] font-bold tracking-[0.2em] flex items-center justify-center gap-3 transition-all bg-slate-100 text-slate-400 cursor-not-allowed shadow-lg">
                        <span id="btnText">Finalize & Secure Agreement</span>
                        <div id="btnSpinner" class="spinner hidden"></div>
                    </button>
                    <p class="text-center text-[9px] text-slate-400 uppercase tracking-widest mt-6">By clicking execute, both parties acknowledge the Effective Date of 2026.</p>
                </div>

                <!-- Final State -->
                <div id="signedCard" class="hidden text-center py-12 md:py-20 space-y-6">
                    <div class="w-20 h-20 md:w-24 md:h-24 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4 border border-emerald-100">
                        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                    </div>
                    <h2 class="font-display text-xl md:text-2xl font-bold tracking-tighter uppercase">Agreement Executed Successfully</h2>
                    <p class="text-xs text-slate-400 uppercase tracking-widest font-black">Contract <span id="finalContractRef"></span> is now binding</p>
                    <div class="pt-8 space-y-4">
                        <p class="text-[9px] text-emerald-600 font-black uppercase tracking-widest" id="emailStatus">
                            ⏳ Sending Email Notifications...
                        </p>
                        <p class="text-xs text-slate-500 leading-relaxed max-w-md mx-auto">
                            A signed copy of this agreement will be sent to both parties via email shortly.
                        </p>
                    </div>
                </div>

            </div>
        </div>

        <footer class="mt-12 md:mt-20 text-center">
            <p class="text-slate-400 text-[8px] font-black uppercase tracking-[0.4em]">
                EXEVO DESIGNERS NETWORK &copy; 2026 • KENYA • PROFESSIONAL SERVICE AGREEMENT
            </p>
        </footer>
    </main>

    <!-- Thank You Modal -->
    <div id="thankYouModal" class="fixed inset-0 bg-slate-900/95 backdrop-blur-xl hidden items-center justify-center z-[100] p-4">
        <div class="bg-white rounded-3xl p-8 md:p-12 w-full max-w-lg text-center space-y-6 shadow-2xl relative animate-fadeIn">
            <!-- Success Icon -->
            <div class="w-20 h-20 md:w-24 md:h-24 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center mx-auto border-4 border-emerald-100">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
            </div>
            
            <!-- Thank You Message -->
            <div class="space-y-3">
                <h2 class="font-display text-2xl md:text-3xl font-bold tracking-tighter uppercase gradient-text">Thank You!</h2>
                <p class="text-slate-600 text-sm md:text-base leading-relaxed">
                    Your agreement has been successfully executed. A <strong>signed copy of the contract</strong> has been sent to both parties via email.
                </p>
            </div>

            <!-- Contract Details -->
            <div class="bg-purple-50/50 border border-purple-100 rounded-2xl p-4 space-y-2">
                <p class="text-[10px] font-black uppercase tracking-widest text-slate-400">Contract Reference</p>
                <p class="font-mono text-sm font-bold text-purple-600" id="popupContractRef">EXV-STJ-2026-001</p>
            </div>

            <!-- Email Status -->
            <div class="bg-emerald-50 border border-emerald-200 rounded-2xl p-4">
                <p class="text-xs text-emerald-700 font-medium" id="modalEmailStatus">
                    ✓ Email sent successfully to both parties
                </p>
            </div>

            <!-- Redirect Message -->
            <div class="pt-4">
                <p class="text-xs text-slate-400 mb-4">Redirecting to homepage in <span id="countdown" class="font-bold text-purple-600">5</span> seconds...</p>
                <button onclick="redirectNow()" class="w-full py-3 font-display text-[11px] font-bold tracking-[0.2em] gradient-bg text-white rounded-xl hover:opacity-90 transition-all">
                    Go to Homepage Now
                </button>
            </div>
        </div>
    </div>

    <script>
        // Initialize EmailJS with your public key
        (function(){
            emailjs.init("6_HJ9Fz3Oatnr-26z"); // Your EmailJS public key
        })();

        let contractData = {};

        const today = new Date();
        document.getElementById('currentDay').innerText = today.getDate();
        document.getElementById('currentMonth').innerText = today.toLocaleDateString('en-GB', {month:'long'});

        function toggleExecuteBtn() {
            const btn = document.getElementById('executeBtn');
            const ack = document.getElementById('termsAck').checked;
            
            if (ack) {
                btn.disabled = false;
                btn.classList.remove('bg-slate-100', 'text-slate-400', 'cursor-not-allowed');
                btn.classList.add('gradient-bg', 'text-white', 'cursor-pointer');
            } else {
                btn.disabled = true;
                btn.classList.add('bg-slate-100', 'text-slate-400', 'cursor-not-allowed');
                btn.classList.remove('gradient-bg', 'text-white', 'cursor-pointer');
            }
        }

        async function sendContractEmail(contractData) {
            try {
                // Template parameters for EmailJS
                const templateParams = {
                    to_email: 'exevodesigners@gmail.com',
                    contract_ref: contractData.contractRef,
                    institution: 'St. Joseph Hospital & College',
                    representative: 'Kabii Kariuki',
                    effective_date: contractData.effectiveDate,
                    execution_time: contractData.localTime,
                    timestamp: contractData.timestamp,
                    price: 'Ksh. 500 per approved flyer design (institutional work only)',
                    message: `
Service Agreement Executed

CONTRACT DETAILS:
Reference: ${contractData.contractRef}
Institution: St. Joseph Hospital & College
Representative: Kabii Kariuki
Effective Date: ${contractData.effectiveDate}
Execution Timestamp: ${contractData.localTime}
UTC Timestamp: ${contractData.timestamp}
Status: EXECUTED AND BINDING

DIGITAL EXECUTION:
This agreement was executed digitally in accordance with:
- The Constitution of Kenya (2010)
- Kenya Information and Communications Act (Cap 411A)
- Electronic Transactions Act

TERMS SUMMARY:
- Price: Ksh. 500 per approved flyer design (institutional work only)
- Revisions: 2 included, Ksh. 300 per additional revision
- Clause 3.2: Personal/third-party work charged at different rates

ACKNOWLEDGMENT:
Kabii Kariuki confirmed acceptance of all terms including Clause 3.2 (pricing) and Clause 11 (digital execution). This digital acknowledgment constitutes a legally binding electronic signature under Kenyan law.

This agreement is now binding between Exevo Designers Network and St. Joseph Hospital & College.
                    `
                };

                // Send via EmailJS
                const response = await emailjs.send(
                    'service_asj64jk',  // Your EmailJS service ID
                    'template_8xgqdfb', // Your EmailJS template ID
                    templateParams
                );

                console.log('Email sent successfully:', response);
                return true;
            } catch (error) {
                console.error('Email sending failed:', error);
                return false;
            }
        }

        async function finalize() {
            // Disable button and show loading
            const btn = document.getElementById('executeBtn');
            const btnText = document.getElementById('btnText');
            const btnSpinner = document.getElementById('btnSpinner');
            
            btn.disabled = true;
            btnText.textContent = "Finalizing Agreement...";
            btnSpinner.classList.remove('hidden');

            // Prepare contract data with timestamp
            const contractRef = document.getElementById('contractRef').textContent;
            const executionDate = new Date();
            const effectiveDate = `${today.getDate()} ${today.toLocaleDateString('en-GB', {month:'long'})} 2026`;
            const timestamp = executionDate.toISOString();
            const localTime = executionDate.toLocaleString('en-KE', { 
                dateStyle: 'full', 
                timeStyle: 'long',
                timeZone: 'Africa/Nairobi'
            });

            contractData = {
                contractRef,
                effectiveDate,
                timestamp,
                localTime
            };

            // Update status
            setTimeout(async () => {
                document.getElementById('contractStatus').textContent = "EXECUTED";
                document.getElementById('contractStatus').classList.remove('text-amber-600');
                document.getElementById('contractStatus').classList.add('text-emerald-600');

                // Show success state
                document.getElementById('executionArea').classList.add('hidden');
                document.getElementById('signedCard').classList.remove('hidden');
                document.getElementById('finalContractRef').textContent = contractRef;

                // Send email notification
                const emailSent = await sendContractEmail(contractData);
                
                // Update email status
                const emailStatus = document.getElementById('emailStatus');
                const modalEmailStatus = document.getElementById('modalEmailStatus');
                
                if (emailSent) {
                    emailStatus.innerHTML = '✓ Email Notifications Sent Successfully';
                    emailStatus.classList.remove('text-amber-600');
                    emailStatus.classList.add('text-emerald-600');
                    modalEmailStatus.textContent = '✓ Email sent successfully to both parties';
                } else {
                    emailStatus.innerHTML = '⚠ Email sending in progress... Please check your inbox';
                    emailStatus.classList.add('text-amber-600');
                    modalEmailStatus.textContent = '⚠ Email notification pending - please check your inbox shortly';
                }

                // Show thank you modal
                showThankYouModal(contractRef);
            }, 1000);
        }

        let countdownInterval;

        function showThankYouModal(contractRef) {
            document.getElementById('thankYouModal').style.display = 'flex';
            document.getElementById('popupContractRef').textContent = contractRef;
            
            let timeLeft = 5;
            document.getElementById('countdown').textContent = timeLeft;
            
            countdownInterval = setInterval(() => {
                timeLeft--;
                if (timeLeft > 0) {
                    document.getElementById('countdown').textContent = timeLeft;
                } else {
                    clearInterval(countdownInterval);
                    redirectToHomepage();
                }
            }, 1000);
        }

        function redirectNow() {
            clearInterval(countdownInterval);
            redirectToHomepage();
        }

        function redirectToHomepage() {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>